{"version":3,"file":"bundle.js","sources":["../../src/ui/layaMaxUI.ts","../../src/uiUtil.ts/SceneMode.ts","../../src/uiUtil.ts/UIMgr.ts","../../src/uiExt/BottomViewExt.ts","../../src/uiExt/ControlViewExt.ts","../../src/uiExt/DimageViewExt.ts","../../src/AStar/PathNode.ts","../../src/AStar/PathFinder.ts","../../src/Map/NodeUtil.ts","../../src/Map/mapFile/TMap.ts","../../src/Map/MapMgr.ts","../../src/Map/MapNode/HeroNode.ts","../../src/uiExt/GameViewExt.ts","../../src/GameConfig.ts","../../src/Main.ts"],"sourcesContent":["/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport View=Laya.View;\r\nimport Dialog=Laya.Dialog;\r\nimport Scene=Laya.Scene;\nvar REG: Function = Laya.ClassUtils.regClass;\nexport module ui {\r\n    export class BottomViewUI extends View {\r\n        public static  uiView:any ={\"type\":\"View\",\"props\":{\"y\":0,\"width\":512,\"runtime\":\"uiExt/BottomViewExt.ts\",\"height\":313,\"centerY\":0,\"centerX\":0},\"compId\":2,\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"comp/image.png\"},\"compId\":12}],\"loadList\":[\"comp/image.png\"],\"loadList3D\":[]};\r\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.createView(BottomViewUI.uiView);\r\n        }\r\n    }\r\n    REG(\"ui.BottomViewUI\",BottomViewUI);\r\n    export class ControlViewUI extends View {\r\n\t\tpublic imgCont:Laya.Image;\n\t\tpublic imgTar:Laya.Image;\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"ControlView\");\r\n        }\r\n    }\r\n    REG(\"ui.ControlViewUI\",ControlViewUI);\r\n    export class DimageViewUI extends View {\r\n\t\tpublic tarplane:Laya.Image;\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"DimageView\");\r\n        }\r\n    }\r\n    REG(\"ui.DimageViewUI\",DimageViewUI);\r\n    export class GameViewUI extends View {\r\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"GameView\");\r\n        }\r\n    }\r\n    REG(\"ui.GameViewUI\",GameViewUI);\r\n    export class LoadingViewUI extends View {\r\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"LoadingView\");\r\n        }\r\n    }\r\n    REG(\"ui.LoadingViewUI\",LoadingViewUI);\r\n}\r","export class SceneMode implements ViewMode {\r\n    private curView: Laya.View;//当前打开的页面\r\n    constructor() { }\r\n    openView(fName: string) {\r\n        let fullName: string = fName + `.scene`;\r\n        Laya.Scene.root.zOrder=1;\r\n        Laya.Scene.open(fullName,false);\r\n    }\r\n    closeView(fName: string) {\r\n        let fullName: string = fName + `.scene`;\r\n        Laya.Scene.close(fullName);\r\n    }\r\n}","import { SceneMode } from './SceneMode';\r\nexport default class UIMgr {\r\n    private constructor() { }\r\n    private static _ins: UIMgr;\r\n    public static get ins(): UIMgr {\r\n        if (!this._ins) {\r\n            this._ins = new UIMgr();\r\n        }\r\n        return this._ins;\r\n    }\r\n    private sceneMode: SceneMode = new SceneMode();//主页面切换用\r\n    private popMode;//弹窗切换用\r\n    public openView(fName: string) {\r\n\r\n        this.sceneMode.openView(fName);\r\n    }\r\n    public closeView(fName: string) {\r\n        this.sceneMode.closeView(fName);\r\n    }\r\n\r\n}","import GameMgr from \"../Game/GameMgr\";\r\nimport { ui } from \"../ui/layaMaxUI\";\r\nimport UIMgr from \"../uiUtil.ts/UIMgr\";\r\n\r\nexport default class BottomViewExt extends ui.BottomViewUI {\r\n    constructor() {\r\n        super();\r\n        this.on(Laya.Event.CLICK, this, this.closeThis);\r\n        this.zOrder = 0;\r\n    }\r\n    private closeThis() {\r\n        UIMgr.ins.closeView(`LoadingView`);\r\n        UIMgr.ins.openView(`GameView`);//\r\n        UIMgr.ins.openView(`ControlView`);\r\n        // GameMgr.ins.gameStar();\r\n        UIMgr.ins.openView(`DimageView`);\r\n    }\r\n\r\n}","import { ui } from \"../ui/layaMaxUI\";\r\n\r\nexport default class ControlViewExt extends ui.ControlViewUI {\r\n    private isTouch: boolean = false;\r\n    private touchDir: Laya.Point = new Laya.Point();\r\n    constructor() {\r\n\r\n        super();\r\n        this.zOrder = 100;\r\n        let stage =\r\n            this.imgTar.on(Laya.Event.MOUSE_DOWN, this, this.touckStr);\r\n\r\n\r\n\r\n    }\r\n    private dragImage(e: Laya.Event) {\r\n        let x: number;\r\n        let y: number;\r\n        if (!this.isTouch) {\r\n            this.imgTar.x = (this.imgCont.width - this.imgTar.width) >> 1;\r\n            this.imgTar.y = (this.imgCont.height - this.imgTar.height) >> 1;\r\n            return;\r\n        }\r\n        else {\r\n            x = e.stageX;\r\n            y = e.stageY;\r\n        }\r\n\r\n        let centerx: number = this.imgCont.x + (this.imgCont.width >> 1);\r\n        let centery: number = this.imgCont.y + (this.imgCont.height >> 1);\r\n        let dirx: number = x - centerx;\r\n        let diry: number = y - centery;\r\n        this.touchDir.setTo(dirx, diry);\r\n        this.touchDir.normalize();\r\n        this.imgTar.x = this.touchDir.x * 50 + (this.imgTar.width >> 1);\r\n        this.imgTar.y = this.touchDir.y * 50 + (this.imgTar.height >> 1);\r\n\r\n    }\r\n    private touckStr() {\r\n        this.isTouch = true;\r\n        Laya.stage.on(Laya.Event.MOUSE_MOVE, this, this.dragImage);\r\n        Laya.stage.on(Laya.Event.MOUSE_UP, this, this.touckEnd);\r\n\r\n    }\r\n    private touckEnd() {\r\n        Laya.stage.off(Laya.Event.MOUSE_MOVE, this, this.dragImage);\r\n        Laya.stage.off(Laya.Event.MOUSE_UP, this, this.touckEnd);\r\n        this.isTouch = false;\r\n        this.dragImage(null);\r\n    }\r\n    onAwake() {\r\n        console.log(\"secen call func onAwake\");\r\n    }\r\n}","import { ui } from \"../ui/layaMaxUI\";\r\n\r\nexport default class DimageViewExt extends ui.DimageViewUI {\r\n    constructor() {\r\n        super();\r\n        this.zOrder = 0;\r\n    }\r\n\r\n}","\r\nexport default class PathNode {\r\n    x = 0;\r\n    y = 0;\r\n    /**权值（f=g+h） */\r\n    F = 0;\r\n    G = 0;\r\n    H = 0\r\n    /**父节点 */\r\n    parent: PathNode = null;\r\n    public Reset() {\r\n        this.F = 0; this.H = 0; this.G = 0;\r\n        this.parent = null;\r\n    }\r\n\r\n}\r\nexport enum EnumDir {\r\n    E0up,\r\n    E1down,\r\n    E2left,\r\n    E3right,\r\n    E4upLeft,\r\n    E5upRight,\r\n    E6downLeft,\r\n    E7downRight\r\n}\r\n\r\n","import PathNode, { EnumDir } from \"./PathNode\";\r\n\r\nexport default class PathFinder {\r\n\r\n    /**核心數據 */\r\n    private m_width: number = 0;\r\n    private m_height: number = 0;\r\n    private m_kCost1: number = 10;//直一格\r\n    private m_kCost2: number = 14;//斜一格\r\n    private m_nodeArray: Array<Array<PathNode>> = null;\r\n    private m_staticBlocks: Array<Array<number>> = null;//静态阻挡\r\n    private m_dymanicBlocks: Array<Array<number>> = null;//動態阻擋\r\n\r\n    private m_openList: Array<PathNode> = [];\r\n    private m_closeList: Array<PathNode> = [];\r\n    /**額外的參數 */\r\n    private m_isIgnoreCorner: boolean = false;//是否走斜綫\r\n\r\n\r\n    constructor(width: number, height: number) {\r\n        this.m_height = height;\r\n        this.m_width = width;\r\n        this.m_nodeArray = new Array<Array<PathNode>>(width);\r\n        this.m_staticBlocks = new Array<Array<number>>(width);\r\n        this.m_dymanicBlocks = new Array<Array<number>>(width);\r\n        for (let indexW: number = 0; indexW < width; ++indexW) {\r\n            this.m_nodeArray[indexW] = new Array<PathNode>(height);\r\n            this.m_staticBlocks[indexW] = new Array<number>(height);\r\n            this.m_dymanicBlocks[indexW] = new Array<number>(height);\r\n            for (let indexH: number = 0; indexH < height; ++indexH) {\r\n                this.m_nodeArray[indexW][indexH] = new PathNode();\r\n                (<PathNode>this.m_nodeArray[indexW][indexH]).x = indexW;\r\n                (<PathNode>this.m_nodeArray[indexW][indexH]).y = indexH;\r\n                this.m_dymanicBlocks[indexW][indexH] = 0;\r\n                this.m_staticBlocks[indexW][indexH] = 0;\r\n            }\r\n        }\r\n    }\r\n    public set isIgnoreCorner(value: boolean) {\r\n        this.m_isIgnoreCorner = value;\r\n    }\r\n    public setStaticBlock(x: number, y: number, data: number) {\r\n        this.m_staticBlocks[x][y] = data;\r\n    }\r\n    public isWalkable(x: number, y: number): boolean {\r\n        if (this.m_staticBlocks[x][y] == 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    public findPath(startX: number, startY: number, endX: number, endY: number): Laya.Point[] {\r\n\r\n        let path: Laya.Point[] = [];\r\n        let resultNode: PathNode = this.SearchPath(startX, startY, endX, endY);\r\n        while (resultNode) {\r\n            let point: Laya.Point = new Laya.Point();\r\n            point.x = resultNode.x;\r\n            point.y = resultNode.y;\r\n            path.push(point);\r\n            resultNode = resultNode.parent;\r\n        }\r\n        path.reverse();\r\n        path.shift();//去掉所在位置\r\n        return path;\r\n    }\r\n    private SearchPath(startX: number, startY: number, endX: number, endY: number): PathNode {\r\n        this.m_openList = [];\r\n        this.m_closeList = [];\r\n        for (let i: number = 0; i < this.m_width; ++i) {\r\n            for (let j: number = 0; j < this.m_height; ++j) {\r\n                (<PathNode>this.m_nodeArray[i][j]).Reset();\r\n            }\r\n        }\r\n        let endNode: PathNode = this.m_nodeArray[endX][endY];\r\n        let curNode: PathNode = null;\r\n        let closestNode: PathNode = null;\r\n        this.addOpenNode(this.m_nodeArray[startX][startY]);\r\n        while (this.m_openList.length) {\r\n            curNode = this.findMinFInOpenList();\r\n            if (!closestNode || closestNode.F <= 0 || curNode.F < closestNode.F) {//todo\r\n                closestNode = curNode;\r\n            }\r\n            this.delOpenNode(curNode);\r\n            this.addCloseNode(curNode);\r\n            if (curNode == endNode) {\r\n                return curNode;//找到的這個點是終點的話直接返回這個點\r\n            }\r\n            let surroundPoints: Array<PathNode> = this.getSurroundPoints(curNode);\r\n            for (let target of surroundPoints) {\r\n                let tempG: number = this.CalcG(curNode, target);\r\n                if (!this.isNodeInOpenList(target)) {\r\n                    target.parent = curNode;\r\n                    target.G = tempG;\r\n                    target.H = this.CalcH(target, endNode);\r\n                    target.F = this.CalcF(target);\r\n                    this.addOpenNode(target);\r\n                }\r\n                else {\r\n                    if (tempG < target.G) {\r\n                        target.parent = curNode;\r\n                        target.G = tempG;\r\n                        target.F = this.CalcF(target);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return closestNode;\r\n    }\r\n    /**\r\n     * 添加節點到開啓列表\r\n     * @param curNode \r\n     */\r\n    private addOpenNode(curNode: PathNode) {\r\n        this.m_openList.push(curNode);\r\n    }\r\n    /**\r\n     * 添加節點到關閉列表\r\n     * @returns\r\n     */\r\n    private delOpenNode(curNode: PathNode) {\r\n        let index: number = this.m_openList.indexOf(curNode);\r\n        if (index > -1) {\r\n            this.m_openList.splice(index, 1);\r\n        }\r\n    }\r\n    /**\r\n     * 當前點是否在开启列表中\r\n     * @returns\r\n     */\r\n    private isNodeInOpenList(curNode: PathNode): boolean {\r\n        let index: number = this.m_openList.indexOf(curNode);\r\n        return index > -1;\r\n    }\r\n    /**\r\n     * 添加節點到關閉列表\r\n     * @returns\r\n     */\r\n    private addCloseNode(curNode: PathNode) {\r\n        this.m_closeList.push(curNode);\r\n    }\r\n    /**\r\n     * 當前點是否在關閉列表中\r\n     * @returns\r\n     */\r\n    private isNodeInCloseList(curNode: PathNode): boolean {\r\n        let index: number = this.m_closeList.indexOf(curNode);\r\n        return index > -1;\r\n    }\r\n    /**\r\n     * 獲得開啓列表中F最小的節點\r\n     */\r\n    private findMinFInOpenList(): PathNode {\r\n        let minFNode: PathNode;\r\n        for (let i of this.m_openList) {\r\n            if (!minFNode) {\r\n                minFNode = i;\r\n            }\r\n            else if (i.F < minFNode.F) {\r\n                minFNode = i;\r\n            }\r\n        }\r\n        return minFNode;\r\n    }\r\n    /**\r\n     * 當前點的周圍可到達點\r\n     */\r\n    private getSurroundPoints(curNode: PathNode): Array<PathNode> {\r\n        let surround: PathNode[] = [];\r\n        let up: PathNode = this.getNodeDirNode(curNode, EnumDir.E0up);\r\n        let down: PathNode = this.getNodeDirNode(curNode, EnumDir.E1down);\r\n        let left: PathNode = this.getNodeDirNode(curNode, EnumDir.E2left);\r\n        let right: PathNode = this.getNodeDirNode(curNode, EnumDir.E3right);\r\n        let leftUp: PathNode = this.m_isIgnoreCorner ? this.getNodeDirNode(curNode, EnumDir.E4upLeft) : null;\r\n        let rightUp: PathNode = this.m_isIgnoreCorner ? this.getNodeDirNode(curNode, EnumDir.E5upRight) : null;\r\n        let leftDown: PathNode = this.m_isIgnoreCorner ? this.getNodeDirNode(curNode, EnumDir.E6downLeft) : null;\r\n        let rightDown: PathNode = this.m_isIgnoreCorner ? this.getNodeDirNode(curNode, EnumDir.E7downRight) : null;\r\n        up && surround.push(up);\r\n        down && surround.push(down);\r\n        left && surround.push(left);\r\n        right && surround.push(right);\r\n        leftUp && surround.push(leftUp);\r\n        rightUp && surround.push(rightUp);\r\n        leftDown && surround.push(leftDown);\r\n        rightDown && surround.push(rightDown);\r\n        return surround;\r\n\r\n    }\r\n    private getNodeDirNode(curNode: PathNode, dir: EnumDir): PathNode {\r\n        let tarNode: PathNode;\r\n        let offX: number = 0;\r\n        let offY: number = 0;\r\n        switch (dir) {\r\n            case EnumDir.E0up:\r\n                offY = -1;\r\n                break;\r\n            case EnumDir.E1down:\r\n                offY = 1\r\n                break;\r\n            case EnumDir.E2left:\r\n                offX = -1;\r\n                break;\r\n            case EnumDir.E3right:\r\n                offX = 1;\r\n                break;\r\n            case EnumDir.E4upLeft:\r\n                offY = -1;\r\n                offX = -1;\r\n                break;\r\n            case EnumDir.E5upRight:\r\n                offY = -1;\r\n                offX = 1;\r\n                break;\r\n            case EnumDir.E6downLeft:\r\n                offY = 1;\r\n                offX = -1;\r\n                break;\r\n            case EnumDir.E7downRight:\r\n                offY = 1;\r\n                offX = 1;\r\n                break;\r\n\r\n        }\r\n        let x: number = curNode.x + offX;\r\n        let y: number = curNode.y + offY;\r\n        //該點是否合法\r\n        let line: Array<PathNode> = this.m_nodeArray[x];\r\n        line && (tarNode = line[y]);\r\n        if (tarNode == null) return tarNode;\r\n        !this.isWalkable(x, y) && (tarNode = null);\r\n        this.isNodeInCloseList(tarNode) && (tarNode = null);\r\n        return tarNode;\r\n    }\r\n    /**\r\n     * 计算G值\r\n     * @param curNode \r\n     * @param target \r\n     * @returns\r\n     */\r\n    private CalcG(curNode: PathNode, target: PathNode): number {\r\n        let extraG: number = 0;\r\n        if (Math.abs(target.x - curNode.x) + Math.abs(target.y - curNode.y) == 1) {\r\n            extraG = this.m_kCost1;\r\n        }\r\n        else {\r\n            extraG = this.m_kCost2;\r\n        }\r\n        let pG: number = 0;\r\n        if (target.parent) {\r\n            pG = target.parent.G;\r\n        }\r\n        return pG + extraG;\r\n    }\r\n    private CalcH(cur: PathNode, end: PathNode): number {\r\n        let squareX: number = (end.x - cur.x) * (end.x - cur.x);\r\n        let squareY: number = (end.y - cur.y) * (end.y - cur.y);\r\n        let edgeCost: number = Math.sqrt(squareX + squareY) * this.m_kCost1;\r\n        edgeCost = edgeCost | 0;\r\n        return edgeCost;\r\n    }\r\n    private CalcF(cur: PathNode): number {\r\n        return cur.G + cur.H;\r\n    }\r\n    public destroy() { }\r\n\r\n}\r\n\r\n","export default class NodeUtil {\r\n    public static readonly GRIDSIZE: number = 125;\r\n    public static TilePixX(tx: number): number {\r\n        return (tx * this.GRIDSIZE);\r\n    }\r\n    public static TilePixY(ty: number): number {\r\n        return (ty * this.GRIDSIZE);\r\n    }\r\n}","import PathFinder from \"../../AStar/PathFinder\";\r\nimport MapMgr from \"../MapMgr\";\r\nimport HeroNode from \"../MapNode/HeroNode\";\r\nimport NodeUtil from \"../NodeUtil\";\r\n\r\nexport default class TMap extends Laya.TiledMap implements MapImp {\r\n    protected mapName: string = \"\"\r\n    protected _pathFinder: PathFinder;\r\n    private touchLayer: Laya.MapLayer;\r\n    private touchPoint: Laya.Point = new Laya.Point;\r\n    private regNodeView: HeroNode;\r\n    constructor() {\r\n        super();\r\n    }\r\n    createMapByName(mName: string) {\r\n        this.mapName = mName;\r\n        let regW: number = Laya.stage.width;\r\n        let regH: number = Laya.stage.height;\r\n        //需要根据实际的屏幕大小计算缩放比例\r\n        let viewReg: Laya.Rectangle = new Laya.Rectangle(0, 0, regW, regH);\r\n        this.createMap(`${mName}.json`, viewReg, new Laya.Handler(this, this.onCreated));\r\n    }\r\n    protected onCreated() {\r\n\r\n        this.touchLayer = this.getLayerByName(\"build\");\r\n        this.setViewPortPivotByScale(0, 0);\r\n\r\n        this.initFinder();\r\n\r\n        // Laya.stage.on(Laya.Event.CLICK, this, this.clickMap);\r\n        Laya.stage.on(Laya.Event.RESIZE, this, this.resetViewReg);\r\n        this.resetViewReg();\r\n        this.moveViewPort(0, 0);\r\n        MapMgr.ins.addToMap();\r\n        this.mapSprite().zOrder = 0;\r\n        this.mapSprite().name = \"maproot\";\r\n\r\n    }\r\n    private resetViewReg() {\r\n        this.numColumnsTile * NodeUtil.GRIDSIZE\r\n        this.scale = Laya.stage.height / (this.numRowsTile * NodeUtil.GRIDSIZE);\r\n        this.changeViewPortBySize(Laya.stage.width, Laya.stage.height);\r\n    }\r\n    private initFinder() {\r\n        let mapGridW: number = this.numColumnsTile;\r\n        let mapGridH: number = this.numRowsTile;\r\n        this._pathFinder = new PathFinder(mapGridW, mapGridH);\r\n        /**设置静态阻挡 */\r\n        let blockLayer: Laya.MapLayer = this.getLayerByName(\"block\");\r\n        for (let x: number = 0; x < mapGridW; ++x) {\r\n            for (let y: number = 0; y < mapGridH; ++y) {\r\n                this._pathFinder.setStaticBlock(x, y, blockLayer.getTileData(x, y));\r\n            }\r\n        }\r\n    }\r\n    private clickMap(e: Laya.Event) {\r\n        this.touchLayer.getTilePositionByScreenPos(e.stageX, e.stageY, this.touchPoint);\r\n        let tileX: number = this.touchPoint.x | 0;\r\n        let tileY: number = this.touchPoint.y | 0;\r\n        if (this._pathFinder.isWalkable(tileX, tileY)) {\r\n            this.regNodeView.StartActiveMove(tileX, tileY);\r\n        }\r\n\r\n    }\r\n    moveViewPort(pixX: number, pixY: number) {\r\n        let cx: number = pixX;\r\n        let cy: number = pixY;\r\n        super.moveViewPort(cx, cy);\r\n    }\r\n    addChild(node: HeroNode) {\r\n        if (!this.regNodeView) {\r\n            this.regNodeView = node;\r\n        }\r\n        this.getLayerByName(\"obj\").addChild(node);\r\n        node.initData(this);\r\n        node.updatePos();\r\n    }\r\n    getLayerByName(lName: string): Laya.MapLayer {\r\n        return super.getLayerByName(lName);\r\n    }\r\n    destroyMap() {\r\n        this.touchLayer = null;\r\n        this.mapName = \"\";\r\n        this.scale = 1;\r\n        this._pathFinder.destroy();\r\n        super.destroy();\r\n    }\r\n    public get pathFinder() {\r\n        return this._pathFinder;\r\n    }\r\n\r\n\r\n\r\n\r\n}","import TMap from \"./mapFile/TMap\";\r\nimport HeroNode from \"./MapNode/HeroNode\";\r\n\r\nexport default class MapMgr {\r\n    private static _ins: MapMgr;\r\n    private nodeList: HeroNode[] = [];\r\n    public static get ins(): MapMgr {\r\n        this._ins || (this._ins = new MapMgr());\r\n        return this._ins;\r\n    }\r\n    private m_Map: TMap;\r\n    /**\r\n     * 新建一个地图\r\n     * @param mName \r\n     */\r\n    public addMap(mName: string) {\r\n        this.m_Map = new TMap();\r\n        this.m_Map.createMapByName(mName);\r\n    }\r\n    /**\r\n     * 删除一个地图\r\n     */\r\n    public delMap() {\r\n        for (let i of this.nodeList) {\r\n            i.destroy();\r\n            i = null;\r\n        }\r\n        this.nodeList = [];\r\n        this.m_Map.destroyMap();\r\n        this.m_Map = null;\r\n    }\r\n    /**\r\n     * 添加对象到数据列表\r\n     * @param node \r\n     */\r\n    public addToMapList(node: HeroNode) {\r\n        this.nodeList.push(node);\r\n    }\r\n    /**\r\n     * 添加对象到地图显示层\r\n     */\r\n    public addToMap() {\r\n        for (let i of this.nodeList) {\r\n            this.m_Map.addChild(i);\r\n            i.updatePos();\r\n        }\r\n    }\r\n    /**\r\n     * 更新地图视口\r\n     *  */\r\n    public updateViewPort(pixX: number, pixY: number) {\r\n        this.m_Map.moveViewPort(pixX, pixY);\r\n    }\r\n    public get pathFinder() {\r\n        return this.m_Map.pathFinder;\r\n    }\r\n    public get map() {\r\n        return this.m_Map;\r\n    }\r\n}","import MapMgr from \"../MapMgr\";\r\nimport NodeUtil from \"../NodeUtil\";\r\n\r\nexport default class HeroNode extends Laya.GridSprite {\r\n    private heroNode: Laya.Sprite = new Laya.Sprite();\r\n    private m_movePath: Array<Laya.Point> = [];//路徑集合\r\n    private m_destNodeIndex: number;//当前移动的序列号\r\n    private m_speed: number = 30;\r\n    private Tilepos: Laya.Point = new Laya.Point();\r\n\r\n    constructor() {\r\n        super();\r\n        this.heroNode.graphics.drawRect(0, 0, 125, 125, `#ff9999`);\r\n        this.addChild(this.heroNode);\r\n        Laya.timer.frameLoop(1, this, this.selfFrame);\r\n    //   this.on()\r\n    }\r\n    initData(map: Laya.TiledMap) {\r\n        super.initData(map);\r\n    }\r\n    StartActiveMove(x: number, y: number) {\r\n        //嘗試讓主角尋路\r\n        let startX: number = 0;\r\n        let startY: number = 0;\r\n        let path: Array<Laya.Point>;\r\n        startX = this.getTileX();\r\n        startY = this.getTileY();\r\n\r\n\r\n\r\n        if (this.m_destNodeIndex == null) {\r\n            path = MapMgr.ins.pathFinder.findPath(startX, startY, x, y);\r\n            if (!path.length) return;\r\n            this.m_movePath = path;\r\n            this.m_destNodeIndex = 0;\r\n        }\r\n        else {\r\n            startX = this.m_movePath[this.m_destNodeIndex].x;\r\n            startY = this.m_movePath[this.m_destNodeIndex].y;\r\n            path = MapMgr.ins.pathFinder.findPath(startX, startY, x, y);\r\n            if (!path.length) return;\r\n            //停止老的移动\r\n            this.StopCurMove();\r\n            this.m_movePath = this.m_movePath.concat(path);\r\n\r\n        }\r\n    }\r\n    private StopCurMove() {\r\n        // this.m_approachActorInstanceID = 0;\r\n        if (this.m_movePath.length <= 0) return;\r\n        // if (!this.m_isActiveMoving) return;\r\n        this.m_movePath.splice(this.m_destNodeIndex + 1);\r\n        // this.m_isActiveMoving = false;\r\n        //Log.Print(`主角停止移动，停止在Tile[${this.m_movePath[this.m_destNodeIndex].x}, ${this.m_movePath[this.m_destNodeIndex].y}].`);\r\n        // 通知服务器停止移动\r\n        // let point = new YQBCommon.CommonDefine.Point();\r\n        // point.x = (this.m_movePath[this.m_destNodeIndex].x);\r\n        // point.y = (this.m_movePath[this.m_destNodeIndex].y);\r\n        // NetSender.SendCsHeroStopMoveSyn(point);\r\n    }\r\n    private selfFrame() {\r\n        if (this.m_destNodeIndex == null) return;\r\n        let m_destPixelPosX: number = NodeUtil.TilePixX(this.m_movePath[this.m_destNodeIndex].x);\r\n        let m_destPixelPosY: number = NodeUtil.TilePixY(this.m_movePath[this.m_destNodeIndex].y);\r\n        // 移动距离\r\n        let moveLength: number = this.m_speed;\r\n        // 移动方向\r\n        let moveDir: Laya.Point = new Laya.Point(m_destPixelPosX - this.getPixX(), m_destPixelPosY - this.getPixY());\r\n        // 当前到下一目的地的距离\r\n        let destDistance: number = moveDir.distance(0, 0);\r\n        // 本次移动会越过下一目的地\r\n        while (moveLength >= destDistance) {\r\n            this.setPixelPosition(m_destPixelPosX, m_destPixelPosY);\r\n            this.m_destNodeIndex += 1;\r\n            if (this.m_destNodeIndex >= this.m_movePath.length) {\r\n                // 移动完毕\r\n                this.Tilepos.setTo(this.m_movePath[this.m_movePath.length - 1].x, this.m_movePath[this.m_movePath.length - 1].y);\r\n                this.m_destNodeIndex = null;\r\n                return;\r\n            }\r\n            m_destPixelPosX = NodeUtil.TilePixX(this.m_movePath[this.m_destNodeIndex].x);\r\n            m_destPixelPosY = NodeUtil.TilePixY(this.m_movePath[this.m_destNodeIndex].y);\r\n            moveLength -= destDistance;\r\n            moveDir.setTo(m_destPixelPosX - this.getPixX(), m_destPixelPosY - this.getPixY());\r\n            destDistance = moveDir.distance(0, 0);\r\n        }\r\n        // 处理不会越过下一目的地时的移动\r\n        moveDir.normalize();\r\n        let cosAngle: number = moveDir.x;\r\n        let sinAngle: number = moveDir.y;\r\n        moveDir.x = moveLength * cosAngle;\r\n        moveDir.y = moveLength * sinAngle;\r\n        let pixelPosX: number = (this.getPixX() + moveDir.x);\r\n        let pixelPosY: number = (this.getPixY() + moveDir.y);\r\n        this.setPixelPosition(pixelPosX, pixelPosY);\r\n    }\r\n    private setPixelPosition(x: number, y: number) {\r\n        this.relativeX = x | 0;\r\n        this.relativeY = y | 0;\r\n        let map: Laya.TiledMap = MapMgr.ins.map;\r\n        let offx: number = 0;\r\n        let offy: number = 0;\r\n\r\n        let cx: number = x + offx - (map.viewPortWidth >> 1);\r\n        let cy: number = y + offy - (map.viewPortHeight >> 1);\r\n\r\n\r\n        let maxX: number = map.width - map.viewPortWidth;\r\n        cx > maxX && (cx = maxX);\r\n        cx < 0 && (cx = 0);\r\n\r\n\r\n        let maxY: number = map.height - map.viewPortHeight;\r\n        cy > maxY && (cy = maxY);\r\n        cy < 0 && (cy = 0);\r\n        this.moveMapViewPort(cx, cy);//改变地图视口\r\n        this.updatePos();\r\n    }\r\n    protected moveMapViewPort(x: number, y: number) {\r\n        MapMgr.ins.updateViewPort(x, y);\r\n    }\r\n    public updatePos() {\r\n        super.updatePos();\r\n    }\r\n    private getPixX(): number {\r\n        return (this.relativeX | 0);\r\n    }\r\n    private getPixY(): number {\r\n        return (this.relativeY | 0);\r\n    }\r\n    private getTileX() {\r\n        return this.Tilepos.x;\r\n    }\r\n    private getTileY() {\r\n        return this.Tilepos.y;\r\n    }\r\n    public destroy() {\r\n        this.heroNode.removeSelf();\r\n        this.heroNode.destroy();\r\n        this.heroNode = null;\r\n        this.removeSelf();\r\n        super.destroy();\r\n    }\r\n\r\n\r\n}","import PathFinder from \"../AStar/PathFinder\";\r\nimport MapMgr from \"../Map/MapMgr\";\r\nimport HeroNode from \"../Map/MapNode/HeroNode\";\r\nimport { ui } from \"../ui/layaMaxUI\";\r\n\r\nexport default class GameViewExt extends ui.GameViewUI {\r\n    private hero: HeroNode = new HeroNode();\r\n    constructor() {\r\n        super();\r\n        MapMgr.ins.addMap(`map/mainmap`);\r\n        MapMgr.ins.addToMapList(this.hero);\r\n        this.zOrder = 1;\r\n    }\r\n\r\n}","/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\r\nimport BottomViewExt from \"./uiExt/BottomViewExt\"\nimport ControlViewExt from \"./uiExt/ControlViewExt\"\nimport DimageViewExt from \"./uiExt/DimageViewExt\"\nimport GameViewExt from \"./uiExt/GameViewExt\"\r\n/*\r\n* 游戏初始化配置;\r\n*/\r\nexport default class GameConfig{\r\n    static width:number=1334;\r\n    static height:number=750;\r\n    static scaleMode:string=\"fixedheight\";\r\n    static screenMode:string=\"horizontal\";\r\n    static alignV:string=\"middle\";\r\n    static alignH:string=\"center\";\r\n    static startScene:any=\"ControlView.scene\";\r\n    static sceneRoot:string=\"\";\r\n    static debug:boolean=false;\r\n    static stat:boolean=false;\r\n    static physicsDebug:boolean=false;\r\n    static exportSceneToJson:boolean=true;\r\n    constructor(){}\r\n    static init(){\r\n        var reg: Function = Laya.ClassUtils.regClass;\r\n        reg(\"uiExt/BottomViewExt.ts\",BottomViewExt);\n        reg(\"uiExt/ControlViewExt.ts\",ControlViewExt);\n        reg(\"uiExt/DimageViewExt.ts\",DimageViewExt);\n        reg(\"uiExt/GameViewExt.ts\",GameViewExt);\r\n    }\r\n}\r\nGameConfig.init();","import GameConfig from \"./GameConfig\";\r\nimport UIMgr from \"./uiUtil.ts/UIMgr\";\r\nclass Main {\r\n\tconstructor() {\r\n\r\n\t\tif (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\r\n\t\telse Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\r\n\t\tLaya[\"Physics\"] && Laya[\"Physics\"].enable();\r\n\t\t// Laya.enableDebugPanel();\r\n\t\tLaya.Stat.show();\r\n\t\tLaya.stage.scaleMode = GameConfig.scaleMode;\r\n\t\tLaya.stage.screenMode = GameConfig.screenMode;\r\n\t\tLaya.stage.screenAdaptationEnabled = true;\r\n\t\tLaya.stage.alignV = GameConfig.alignV;\r\n\t\tLaya.stage.alignH = GameConfig.alignH;\r\n\t\t//兼容微信不支持加载scene后缀场景\r\n\t\tLaya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\r\n\r\n\t\t//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\r\n\t\tif (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\r\n\t\tif (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\r\n\t\tif (GameConfig.stat) Laya.Stat.show();\r\n\t\tLaya.alertGlobalError(true);\r\n\r\n\t\t//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程\r\n\t\tLaya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\r\n\r\n\t}\r\n\r\n\tonVersionLoaded(): void {\r\n\t\t//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图\r\n\t\tLaya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\r\n\t}\r\n\r\n\tonConfigLoaded(): void {\r\n\t\t//加载IDE指定的场景\r\n\t\tUIMgr.ins.openView(`LoadingView`);\r\n\t}\r\n}\r\n//激活启动类\r\nnew Main();\r\n"],"names":[],"mappings":";;;IACA,IAAO,IAAI,GAAC,IAAI,CAAC,IAAI,CAAC;IAGtB,IAAI,GAAG,GAAa,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;QAC/B,EAAE,CA6Cf;IA7CD,WAAc,EAAE;QACZ,MAAa,YAAa,SAAQ,IAAI;YAElC,gBAAe,KAAK,EAAE,CAAA,EAAC;YACvB,cAAc;gBACV,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;aACxC;;QALc,mBAAM,GAAM,EAAC,MAAM,EAAC,MAAM,EAAC,OAAO,EAAC,EAAC,GAAG,EAAC,CAAC,EAAC,OAAO,EAAC,GAAG,EAAC,SAAS,EAAC,wBAAwB,EAAC,QAAQ,EAAC,GAAG,EAAC,SAAS,EAAC,CAAC,EAAC,SAAS,EAAC,CAAC,EAAC,EAAC,QAAQ,EAAC,CAAC,EAAC,OAAO,EAAC,CAAC,EAAC,MAAM,EAAC,OAAO,EAAC,OAAO,EAAC,EAAC,GAAG,EAAC,CAAC,EAAC,GAAG,EAAC,CAAC,EAAC,MAAM,EAAC,gBAAgB,EAAC,EAAC,QAAQ,EAAC,EAAE,EAAC,CAAC,EAAC,UAAU,EAAC,CAAC,gBAAgB,CAAC,EAAC,YAAY,EAAC,EAAE,EAAC,CAAC;QADpR,eAAY,eAOxB,CAAA;QACD,GAAG,CAAC,iBAAiB,EAAC,YAAY,CAAC,CAAC;QACpC,MAAa,aAAc,SAAQ,IAAI;YAGnC,gBAAe,KAAK,EAAE,CAAA,EAAC;YACvB,cAAc;gBACV,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;aACjC;SACJ;QARY,gBAAa,gBAQzB,CAAA;QACD,GAAG,CAAC,kBAAkB,EAAC,aAAa,CAAC,CAAC;QACtC,MAAa,YAAa,SAAQ,IAAI;YAElC,gBAAe,KAAK,EAAE,CAAA,EAAC;YACvB,cAAc;gBACV,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;aAChC;SACJ;QAPY,eAAY,eAOxB,CAAA;QACD,GAAG,CAAC,iBAAiB,EAAC,YAAY,CAAC,CAAC;QACpC,MAAa,UAAW,SAAQ,IAAI;YAChC,gBAAe,KAAK,EAAE,CAAA,EAAC;YACvB,cAAc;gBACV,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;aAC9B;SACJ;QANY,aAAU,aAMtB,CAAA;QACD,GAAG,CAAC,eAAe,EAAC,UAAU,CAAC,CAAC;QAChC,MAAa,aAAc,SAAQ,IAAI;YACnC,gBAAe,KAAK,EAAE,CAAA,EAAC;YACvB,cAAc;gBACV,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;aACjC;SACJ;QANY,gBAAa,gBAMzB,CAAA;QACD,GAAG,CAAC,kBAAkB,EAAC,aAAa,CAAC,CAAC;IAC1C,CAAC,EA7Ca,EAAE,KAAF,EAAE;;UCLH,SAAS;QAElB,iBAAiB;QACjB,QAAQ,CAAC,KAAa;YAClB,IAAI,QAAQ,GAAW,KAAK,GAAG,QAAQ,CAAC;YACxC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAC,CAAC,CAAC;YACzB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAC,KAAK,CAAC,CAAC;SACnC;QACD,SAAS,CAAC,KAAa;YACnB,IAAI,QAAQ,GAAW,KAAK,GAAG,QAAQ,CAAC;YACxC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;SAC9B;KACJ;;UCXoB,KAAK;QACtB;YAQQ,cAAS,GAAc,IAAI,SAAS,EAAE,CAAC;SARtB;QAElB,WAAW,GAAG;YACjB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBACZ,IAAI,CAAC,IAAI,GAAG,IAAI,KAAK,EAAE,CAAC;aAC3B;YACD,OAAO,IAAI,CAAC,IAAI,CAAC;SACpB;QAGM,QAAQ,CAAC,KAAa;YAEzB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;SAClC;QACM,SAAS,CAAC,KAAa;YAC1B,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SACnC;KAEJ;;UChBoB,aAAc,SAAQ,EAAE,CAAC,YAAY;QACtD;YACI,KAAK,EAAE,CAAC;YACR,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAChD,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;SACnB;QACO,SAAS;YACb,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;YACnC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YAC/B,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAElC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;SACpC;KAEJ;;UChBoB,cAAe,SAAQ,EAAE,CAAC,aAAa;QAGxD;YAEI,KAAK,EAAE,CAAC;YAJJ,YAAO,GAAY,KAAK,CAAC;YACzB,aAAQ,GAAe,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAI5C,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;YAClB,IAAI,KAAK,GACL,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAIlE;QACO,SAAS,CAAC,CAAa;YAC3B,IAAI,CAAS,CAAC;YACd,IAAI,CAAS,CAAC;YACd,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACf,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,CAAC,CAAC;gBAC9D,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,CAAC;gBAChE,OAAO;aACV;iBACI;gBACD,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;gBACb,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;aAChB;YAED,IAAI,OAAO,GAAW,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;YACjE,IAAI,OAAO,GAAW,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;YAClE,IAAI,IAAI,GAAW,CAAC,GAAG,OAAO,CAAC;YAC/B,IAAI,IAAI,GAAW,CAAC,GAAG,OAAO,CAAC;YAC/B,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;YAC1B,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;YAChE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;SAEpE;QACO,QAAQ;YACZ,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAC3D,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAE3D;QACO,QAAQ;YACZ,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAC5D,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YACzD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;SACxB;QACD,OAAO;YACH,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;SAC1C;KACJ;;UCnDoB,aAAc,SAAQ,EAAE,CAAC,YAAY;QACtD;YACI,KAAK,EAAE,CAAC;YACR,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;SACnB;KAEJ;;UCPoB,QAAQ;QAA7B;YACI,MAAC,GAAG,CAAC,CAAC;YACN,MAAC,GAAG,CAAC,CAAC;YAEN,MAAC,GAAG,CAAC,CAAC;YACN,MAAC,GAAG,CAAC,CAAC;YACN,MAAC,GAAG,CAAC,CAAA;YAEL,WAAM,GAAa,IAAI,CAAC;SAM3B;QALU,KAAK;YACR,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;YAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;YAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACtB;KAEJ;AACD,IAAA,IAAY,OASX;IATD,WAAY,OAAO;QACf,qCAAI,CAAA;QACJ,yCAAM,CAAA;QACN,yCAAM,CAAA;QACN,2CAAO,CAAA;QACP,6CAAQ,CAAA;QACR,+CAAS,CAAA;QACT,iDAAU,CAAA;QACV,mDAAW,CAAA;IACf,CAAC,EATW,OAAO,KAAP,OAAO,QASlB;;UCvBoB,UAAU;QAiB3B,YAAY,KAAa,EAAE,MAAc;YAdjC,YAAO,GAAW,CAAC,CAAC;YACpB,aAAQ,GAAW,CAAC,CAAC;YACrB,aAAQ,GAAW,EAAE,CAAC;YACtB,aAAQ,GAAW,EAAE,CAAC;YACtB,gBAAW,GAA2B,IAAI,CAAC;YAC3C,mBAAc,GAAyB,IAAI,CAAC;YAC5C,oBAAe,GAAyB,IAAI,CAAC;YAE7C,eAAU,GAAoB,EAAE,CAAC;YACjC,gBAAW,GAAoB,EAAE,CAAC;YAElC,qBAAgB,GAAY,KAAK,CAAC;YAItC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,IAAI,KAAK,CAAkB,KAAK,CAAC,CAAC;YACrD,IAAI,CAAC,cAAc,GAAG,IAAI,KAAK,CAAgB,KAAK,CAAC,CAAC;YACtD,IAAI,CAAC,eAAe,GAAG,IAAI,KAAK,CAAgB,KAAK,CAAC,CAAC;YACvD,KAAK,IAAI,MAAM,GAAW,CAAC,EAAE,MAAM,GAAG,KAAK,EAAE,EAAE,MAAM,EAAE;gBACnD,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,IAAI,KAAK,CAAW,MAAM,CAAC,CAAC;gBACvD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,IAAI,KAAK,CAAS,MAAM,CAAC,CAAC;gBACxD,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,GAAG,IAAI,KAAK,CAAS,MAAM,CAAC,CAAC;gBACzD,KAAK,IAAI,MAAM,GAAW,CAAC,EAAE,MAAM,GAAG,MAAM,EAAE,EAAE,MAAM,EAAE;oBACpD,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,GAAG,IAAI,QAAQ,EAAE,CAAC;oBACvC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,MAAM,CAAE,CAAC,CAAC,GAAG,MAAM,CAAC;oBAC7C,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,MAAM,CAAE,CAAC,CAAC,GAAG,MAAM,CAAC;oBACxD,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;oBACzC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;iBAC3C;aACJ;SACJ;QACD,IAAW,cAAc,CAAC,KAAc;YACpC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;SACjC;QACM,cAAc,CAAC,CAAS,EAAE,CAAS,EAAE,IAAY;YACpD,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SACpC;QACM,UAAU,CAAC,CAAS,EAAE,CAAS;YAClC,IAAI,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;gBAChC,OAAO,IAAI,CAAC;aACf;YACD,OAAO,KAAK,CAAC;SAChB;QACM,QAAQ,CAAC,MAAc,EAAE,MAAc,EAAE,IAAY,EAAE,IAAY;YAEtE,IAAI,IAAI,GAAiB,EAAE,CAAC;YAC5B,IAAI,UAAU,GAAa,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACvE,OAAO,UAAU,EAAE;gBACf,IAAI,KAAK,GAAe,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;gBACzC,KAAK,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;gBACvB,KAAK,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACjB,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC;aAClC;YACD,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,OAAO,IAAI,CAAC;SACf;QACO,UAAU,CAAC,MAAc,EAAE,MAAc,EAAE,IAAY,EAAE,IAAY;YACzE,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACtB,KAAK,IAAI,CAAC,GAAW,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE;gBAC3C,KAAK,IAAI,CAAC,GAAW,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,EAAE;oBACjC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,KAAK,EAAE,CAAC;iBAC9C;aACJ;YACD,IAAI,OAAO,GAAa,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;YACrD,IAAI,OAAO,GAAa,IAAI,CAAC;YAC7B,IAAI,WAAW,GAAa,IAAI,CAAC;YACjC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACnD,OAAO,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;gBAC3B,OAAO,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;gBACpC,IAAI,CAAC,WAAW,IAAI,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,EAAE;oBACjE,WAAW,GAAG,OAAO,CAAC;iBACzB;gBACD,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;gBAC1B,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBAC3B,IAAI,OAAO,IAAI,OAAO,EAAE;oBACpB,OAAO,OAAO,CAAC;iBAClB;gBACD,IAAI,cAAc,GAAoB,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;gBACtE,KAAK,IAAI,MAAM,IAAI,cAAc,EAAE;oBAC/B,IAAI,KAAK,GAAW,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;oBAChD,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,EAAE;wBAChC,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC;wBACxB,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC;wBACjB,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;wBACvC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;wBAC9B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;qBAC5B;yBACI;wBACD,IAAI,KAAK,GAAG,MAAM,CAAC,CAAC,EAAE;4BAClB,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC;4BACxB,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC;4BACjB,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;yBACjC;qBACJ;iBACJ;aACJ;YACD,OAAO,WAAW,CAAC;SACtB;QAKO,WAAW,CAAC,OAAiB;YACjC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACjC;QAKO,WAAW,CAAC,OAAiB;YACjC,IAAI,KAAK,GAAW,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACrD,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;gBACZ,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aACpC;SACJ;QAKO,gBAAgB,CAAC,OAAiB;YACtC,IAAI,KAAK,GAAW,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACrD,OAAO,KAAK,GAAG,CAAC,CAAC,CAAC;SACrB;QAKO,YAAY,CAAC,OAAiB;YAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAClC;QAKO,iBAAiB,CAAC,OAAiB;YACvC,IAAI,KAAK,GAAW,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACtD,OAAO,KAAK,GAAG,CAAC,CAAC,CAAC;SACrB;QAIO,kBAAkB;YACtB,IAAI,QAAkB,CAAC;YACvB,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE;gBAC3B,IAAI,CAAC,QAAQ,EAAE;oBACX,QAAQ,GAAG,CAAC,CAAC;iBAChB;qBACI,IAAI,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE;oBACvB,QAAQ,GAAG,CAAC,CAAC;iBAChB;aACJ;YACD,OAAO,QAAQ,CAAC;SACnB;QAIO,iBAAiB,CAAC,OAAiB;YACvC,IAAI,QAAQ,GAAe,EAAE,CAAC;YAC9B,IAAI,EAAE,GAAa,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;YAC9D,IAAI,IAAI,GAAa,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;YAClE,IAAI,IAAI,GAAa,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;YAClE,IAAI,KAAK,GAAa,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;YACpE,IAAI,MAAM,GAAa,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC;YACrG,IAAI,OAAO,GAAa,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;YACvG,IAAI,QAAQ,GAAa,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC;YACzG,IAAI,SAAS,GAAa,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC;YAC3G,EAAE,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACxB,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC5B,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC5B,KAAK,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC9B,MAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAChC,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAClC,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpC,SAAS,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACtC,OAAO,QAAQ,CAAC;SAEnB;QACO,cAAc,CAAC,OAAiB,EAAE,GAAY;YAClD,IAAI,OAAiB,CAAC;YACtB,IAAI,IAAI,GAAW,CAAC,CAAC;YACrB,IAAI,IAAI,GAAW,CAAC,CAAC;YACrB,QAAQ,GAAG;gBACP,KAAK,OAAO,CAAC,IAAI;oBACb,IAAI,GAAG,CAAC,CAAC,CAAC;oBACV,MAAM;gBACV,KAAK,OAAO,CAAC,MAAM;oBACf,IAAI,GAAG,CAAC,CAAA;oBACR,MAAM;gBACV,KAAK,OAAO,CAAC,MAAM;oBACf,IAAI,GAAG,CAAC,CAAC,CAAC;oBACV,MAAM;gBACV,KAAK,OAAO,CAAC,OAAO;oBAChB,IAAI,GAAG,CAAC,CAAC;oBACT,MAAM;gBACV,KAAK,OAAO,CAAC,QAAQ;oBACjB,IAAI,GAAG,CAAC,CAAC,CAAC;oBACV,IAAI,GAAG,CAAC,CAAC,CAAC;oBACV,MAAM;gBACV,KAAK,OAAO,CAAC,SAAS;oBAClB,IAAI,GAAG,CAAC,CAAC,CAAC;oBACV,IAAI,GAAG,CAAC,CAAC;oBACT,MAAM;gBACV,KAAK,OAAO,CAAC,UAAU;oBACnB,IAAI,GAAG,CAAC,CAAC;oBACT,IAAI,GAAG,CAAC,CAAC,CAAC;oBACV,MAAM;gBACV,KAAK,OAAO,CAAC,WAAW;oBACpB,IAAI,GAAG,CAAC,CAAC;oBACT,IAAI,GAAG,CAAC,CAAC;oBACT,MAAM;aAEb;YACD,IAAI,CAAC,GAAW,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,GAAW,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC;YAEjC,IAAI,IAAI,GAAoB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAChD,IAAI,KAAK,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,OAAO,IAAI,IAAI;gBAAE,OAAO,OAAO,CAAC;YACpC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,OAAO,GAAG,IAAI,CAAC,CAAC;YAC3C,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,OAAO,GAAG,IAAI,CAAC,CAAC;YACpD,OAAO,OAAO,CAAC;SAClB;QAOO,KAAK,CAAC,OAAiB,EAAE,MAAgB;YAC7C,IAAI,MAAM,GAAW,CAAC,CAAC;YACvB,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;gBACtE,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;aAC1B;iBACI;gBACD,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;aAC1B;YACD,IAAI,EAAE,GAAW,CAAC,CAAC;YACnB,IAAI,MAAM,CAAC,MAAM,EAAE;gBACf,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;aACxB;YACD,OAAO,EAAE,GAAG,MAAM,CAAC;SACtB;QACO,KAAK,CAAC,GAAa,EAAE,GAAa;YACtC,IAAI,OAAO,GAAW,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YACxD,IAAI,OAAO,GAAW,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YACxD,IAAI,QAAQ,GAAW,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;YACpE,QAAQ,GAAG,QAAQ,GAAG,CAAC,CAAC;YACxB,OAAO,QAAQ,CAAC;SACnB;QACO,KAAK,CAAC,GAAa;YACvB,OAAO,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;SACxB;QACM,OAAO,MAAM;KAEvB;;UCxQoB,QAAQ;QAElB,OAAO,QAAQ,CAAC,EAAU;YAC7B,QAAQ,EAAE,GAAG,IAAI,CAAC,QAAQ,EAAE;SAC/B;QACM,OAAO,QAAQ,CAAC,EAAU;YAC7B,QAAQ,EAAE,GAAG,IAAI,CAAC,QAAQ,EAAE;SAC/B;;IANsB,iBAAQ,GAAW,GAAG,CAAC;;UCI7B,IAAK,SAAQ,IAAI,CAAC,QAAQ;QAM3C;YACI,KAAK,EAAE,CAAC;YANF,YAAO,GAAW,EAAE,CAAA;YAGtB,eAAU,GAAe,IAAI,IAAI,CAAC,KAAK,CAAC;SAI/C;QACD,eAAe,CAAC,KAAa;YACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,IAAI,GAAW,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YACpC,IAAI,IAAI,GAAW,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;YAErC,IAAI,OAAO,GAAmB,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACnE,IAAI,CAAC,SAAS,CAAC,GAAG,KAAK,OAAO,EAAE,OAAO,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;SACpF;QACS,SAAS;YAEf,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YAC/C,IAAI,CAAC,uBAAuB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAEnC,IAAI,CAAC,UAAU,EAAE,CAAC;YAGlB,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAC1D,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;YACtB,IAAI,CAAC,SAAS,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC;YAC5B,IAAI,CAAC,SAAS,EAAE,CAAC,IAAI,GAAG,SAAS,CAAC;SAErC;QACO,YAAY;YAChB,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,QAAQ,CAAA;YACvC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC;YACxE,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;SAClE;QACO,UAAU;YACd,IAAI,QAAQ,GAAW,IAAI,CAAC,cAAc,CAAC;YAC3C,IAAI,QAAQ,GAAW,IAAI,CAAC,WAAW,CAAC;YACxC,IAAI,CAAC,WAAW,GAAG,IAAI,UAAU,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;YAEtD,IAAI,UAAU,GAAkB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YAC7D,KAAK,IAAI,CAAC,GAAW,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,EAAE,CAAC,EAAE;gBACvC,KAAK,IAAI,CAAC,GAAW,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,EAAE,CAAC,EAAE;oBACvC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;iBACvE;aACJ;SACJ;QACO,QAAQ,CAAC,CAAa;YAC1B,IAAI,CAAC,UAAU,CAAC,0BAA0B,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;YAChF,IAAI,KAAK,GAAW,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC;YAC1C,IAAI,KAAK,GAAW,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC;YAC1C,IAAI,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE;gBAC3C,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;aAClD;SAEJ;QACD,YAAY,CAAC,IAAY,EAAE,IAAY;YACnC,IAAI,EAAE,GAAW,IAAI,CAAC;YACtB,IAAI,EAAE,GAAW,IAAI,CAAC;YACtB,KAAK,CAAC,YAAY,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;SAC9B;QACD,QAAQ,CAAC,IAAc;YACnB,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBACnB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aAC3B;YACD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC1C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YACpB,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;QACD,cAAc,CAAC,KAAa;YACxB,OAAO,KAAK,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;SACtC;QACD,UAAU;YACN,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YACf,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YAC3B,KAAK,CAAC,OAAO,EAAE,CAAC;SACnB;QACD,IAAW,UAAU;YACjB,OAAO,IAAI,CAAC,WAAW,CAAC;SAC3B;KAKJ;;UC3FoB,MAAM;QAA3B;YAEY,aAAQ,GAAe,EAAE,CAAC;SAsDrC;QArDU,WAAW,GAAG;YACjB,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,GAAG,IAAI,MAAM,EAAE,CAAC,CAAC;YACxC,OAAO,IAAI,CAAC,IAAI,CAAC;SACpB;QAMM,MAAM,CAAC,KAAa;YACvB,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;YACxB,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;SACrC;QAIM,MAAM;YACT,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACzB,CAAC,CAAC,OAAO,EAAE,CAAC;gBACZ,CAAC,GAAG,IAAI,CAAC;aACZ;YACD,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;YACnB,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;YACxB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;SACrB;QAKM,YAAY,CAAC,IAAc;YAC9B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC5B;QAIM,QAAQ;YACX,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACzB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACvB,CAAC,CAAC,SAAS,EAAE,CAAC;aACjB;SACJ;QAIM,cAAc,CAAC,IAAY,EAAE,IAAY;YAC5C,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SACvC;QACD,IAAW,UAAU;YACjB,OAAO,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;SAChC;QACD,IAAW,GAAG;YACV,OAAO,IAAI,CAAC,KAAK,CAAC;SACrB;KACJ;;UCxDoB,QAAS,SAAQ,IAAI,CAAC,UAAU;QAOjD;YACI,KAAK,EAAE,CAAC;YAPJ,aAAQ,GAAgB,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;YAC1C,eAAU,GAAsB,EAAE,CAAC;YAEnC,YAAO,GAAW,EAAE,CAAC;YACrB,YAAO,GAAe,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAI3C,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,SAAS,CAAC,CAAC;YAC3D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC7B,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;SAEjD;QACD,QAAQ,CAAC,GAAkB;YACvB,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;SACvB;QACD,eAAe,CAAC,CAAS,EAAE,CAAS;YAEhC,IAAI,MAAM,GAAW,CAAC,CAAC;YACvB,IAAI,MAAM,GAAW,CAAC,CAAC;YACvB,IAAI,IAAuB,CAAC;YAC5B,MAAM,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;YACzB,MAAM,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;YAIzB,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,EAAE;gBAC9B,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC5D,IAAI,CAAC,IAAI,CAAC,MAAM;oBAAE,OAAO;gBACzB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;aAC5B;iBACI;gBACD,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;gBACjD,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;gBACjD,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC5D,IAAI,CAAC,IAAI,CAAC,MAAM;oBAAE,OAAO;gBAEzB,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;aAElD;SACJ;QACO,WAAW;YAEf,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC;gBAAE,OAAO;YAExC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC;SAQpD;QACO,SAAS;YACb,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI;gBAAE,OAAO;YACzC,IAAI,eAAe,GAAW,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;YACzF,IAAI,eAAe,GAAW,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;YAEzF,IAAI,UAAU,GAAW,IAAI,CAAC,OAAO,CAAC;YAEtC,IAAI,OAAO,GAAe,IAAI,IAAI,CAAC,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,EAAE,EAAE,eAAe,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;YAE7G,IAAI,YAAY,GAAW,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAElD,OAAO,UAAU,IAAI,YAAY,EAAE;gBAC/B,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,eAAe,CAAC,CAAC;gBACxD,IAAI,CAAC,eAAe,IAAI,CAAC,CAAC;gBAC1B,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;oBAEhD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjH,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,OAAO;iBACV;gBACD,eAAe,GAAG,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7E,eAAe,GAAG,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7E,UAAU,IAAI,YAAY,CAAC;gBAC3B,OAAO,CAAC,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,EAAE,EAAE,eAAe,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;gBAClF,YAAY,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aACzC;YAED,OAAO,CAAC,SAAS,EAAE,CAAC;YACpB,IAAI,QAAQ,GAAW,OAAO,CAAC,CAAC,CAAC;YACjC,IAAI,QAAQ,GAAW,OAAO,CAAC,CAAC,CAAC;YACjC,OAAO,CAAC,CAAC,GAAG,UAAU,GAAG,QAAQ,CAAC;YAClC,OAAO,CAAC,CAAC,GAAG,UAAU,GAAG,QAAQ,CAAC;YAClC,IAAI,SAAS,IAAY,IAAI,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YACrD,IAAI,SAAS,IAAY,IAAI,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YACrD,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;SAC/C;QACO,gBAAgB,CAAC,CAAS,EAAE,CAAS;YACzC,IAAI,CAAC,SAAS,GAAG,CAAC,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,CAAC,GAAG,CAAC,CAAC;YACvB,IAAI,GAAG,GAAkB,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC;YACxC,IAAI,IAAI,GAAW,CAAC,CAAC;YACrB,IAAI,IAAI,GAAW,CAAC,CAAC;YAErB,IAAI,EAAE,GAAW,CAAC,GAAG,IAAI,IAAI,GAAG,CAAC,aAAa,IAAI,CAAC,CAAC,CAAC;YACrD,IAAI,EAAE,GAAW,CAAC,GAAG,IAAI,IAAI,GAAG,CAAC,cAAc,IAAI,CAAC,CAAC,CAAC;YAGtD,IAAI,IAAI,GAAW,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,aAAa,CAAC;YACjD,EAAE,GAAG,IAAI,KAAK,EAAE,GAAG,IAAI,CAAC,CAAC;YACzB,EAAE,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;YAGnB,IAAI,IAAI,GAAW,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC,cAAc,CAAC;YACnD,EAAE,GAAG,IAAI,KAAK,EAAE,GAAG,IAAI,CAAC,CAAC;YACzB,EAAE,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,eAAe,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;YAC7B,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;QACS,eAAe,CAAC,CAAS,EAAE,CAAS;YAC1C,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACnC;QACM,SAAS;YACZ,KAAK,CAAC,SAAS,EAAE,CAAC;SACrB;QACO,OAAO;YACX,QAAQ,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE;SAC/B;QACO,OAAO;YACX,QAAQ,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE;SAC/B;QACO,QAAQ;YACZ,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;SACzB;QACO,QAAQ;YACZ,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;SACzB;QACM,OAAO;YACV,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;YAC3B,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YACxB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,KAAK,CAAC,OAAO,EAAE,CAAC;SACnB;KAGJ;;UC5IoB,WAAY,SAAQ,EAAE,CAAC,UAAU;QAElD;YACI,KAAK,EAAE,CAAC;YAFJ,SAAI,GAAa,IAAI,QAAQ,EAAE,CAAC;YAGpC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YACjC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;SACnB;KAEJ;;UCNoB,UAAU;QAa3B,iBAAe;QACf,OAAO,IAAI;YACP,IAAI,GAAG,GAAa,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;YAC7C,GAAG,CAAC,wBAAwB,EAAC,aAAa,CAAC,CAAC;YAC5C,GAAG,CAAC,yBAAyB,EAAC,cAAc,CAAC,CAAC;YAC9C,GAAG,CAAC,wBAAwB,EAAC,aAAa,CAAC,CAAC;YAC5C,GAAG,CAAC,sBAAsB,EAAC,WAAW,CAAC,CAAC;SAC3C;;IAnBM,gBAAK,GAAQ,IAAI,CAAC;IAClB,iBAAM,GAAQ,GAAG,CAAC;IAClB,oBAAS,GAAQ,aAAa,CAAC;IAC/B,qBAAU,GAAQ,YAAY,CAAC;IAC/B,iBAAM,GAAQ,QAAQ,CAAC;IACvB,iBAAM,GAAQ,QAAQ,CAAC;IACvB,qBAAU,GAAK,mBAAmB,CAAC;IACnC,oBAAS,GAAQ,EAAE,CAAC;IACpB,gBAAK,GAAS,KAAK,CAAC;IACpB,eAAI,GAAS,KAAK,CAAC;IACnB,uBAAY,GAAS,KAAK,CAAC;IAC3B,4BAAiB,GAAS,IAAI,CAAC;IAU1C,UAAU,CAAC,IAAI,EAAE,CAAC;;IC5BlB,MAAM,IAAI;QACT;YAEC,IAAI,MAAM,CAAC,QAAQ,CAAC;gBAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;;gBAClE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACnE,IAAI,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,CAAC;YAE5C,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YACjB,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,UAAU,CAAC,SAAS,CAAC;YAC5C,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,UAAU,CAAC,UAAU,CAAC;YAC9C,IAAI,CAAC,KAAK,CAAC,uBAAuB,GAAG,IAAI,CAAC;YAC1C,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC;YACtC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC;YAEtC,IAAI,CAAC,GAAG,CAAC,iBAAiB,GAAG,UAAU,CAAC,iBAAiB,CAAC;YAG1D,IAAI,UAAU,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,MAAM;gBAAE,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC9F,IAAI,UAAU,CAAC,YAAY,IAAI,IAAI,CAAC,kBAAkB,CAAC;gBAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC,MAAM,EAAE,CAAC;YAC3F,IAAI,UAAU,CAAC,IAAI;gBAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YACtC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;YAG5B,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,CAAC;SAEpI;QAED,eAAe;YAEd,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,iBAAiB,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;SAChG;QAED,cAAc;YAEb,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;SAClC;KACD;IAED,IAAI,IAAI,EAAE,CAAC;;;;"}